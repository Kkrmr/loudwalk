(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{395:function(s,t,e){"use strict";e.r(t);var r=e(9),a=Object(r.a)({},(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h2",{attrs:{id:"前書き"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#前書き"}},[s._v("#")]),s._v(" 前書き")]),s._v(" "),e("p",[s._v("初めまして、Kkrmrです。")]),s._v(" "),e("p",[s._v("この記事には本ブログのセットアップ手順を書いています。")]),s._v(" "),e("p",[s._v("以下のような方に読んでもらえればと思います。")]),s._v(" "),e("ul",[e("li",[s._v("Windowsユーザ")]),s._v(" "),e("li",[s._v("WSL、Dockerに触ったことがある方")]),s._v(" "),e("li",[s._v("Vueに触ったことのない方")])]),s._v(" "),e("h2",{attrs:{id:"環境情報"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#環境情報"}},[s._v("#")]),s._v(" 環境情報")]),s._v(" "),e("ul",[e("li",[s._v("Windows Home 10 Version 2004（64 bit）")]),s._v(" "),e("li",[s._v("WSL2")]),s._v(" "),e("li",[s._v("Ubuntu 18.04.1 LTS (Bionic Beaver)")]),s._v(" "),e("li",[s._v("Docker CE 19.03.11")]),s._v(" "),e("li",[s._v("VuePress ^1.5.2")]),s._v(" "),e("li",[s._v("vuepress/theme-blog ^1.5.2")])]),s._v(" "),e("p",[s._v("※静的サイトジェネレータは他にもありますが、業務でVueを触る可能性を考慮しVuePressを採用しました。")]),s._v(" "),e("h2",{attrs:{id:"wsl2×dockerのセットアップ"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#wsl2×dockerのセットアップ"}},[s._v("#")]),s._v(" WSL2×Dockerのセットアップ")]),s._v(" "),e("p",[s._v("WSL2×Dockerのセットアップ手順は以下の通りです。"),e("br"),s._v("\n詳細は参考ページも参照してください。")]),s._v(" "),e("ol",[e("li",[e("p",[s._v("WSLの有効化"),e("br"),s._v("\nLinux 用 Windows サブシステムを有効にする。"),e("br"),s._v("\nコントロール パネル\\プログラム\\プログラムと機能\\Windows の機能の有効化または無効化から、「Linux 用 Windows サブシステム」をチェックする。"),e("br"),s._v("\n（もしくはPowerShellから該当のコマンドを実行する。）"),e("br"),s._v(" "),e("a",{attrs:{href:"https://docs.microsoft.com/ja-jp/windows/wsl/install-win10",target:"_blank",rel:"noopener noreferrer"}},[s._v("参考ページ1"),e("OutboundLink")],1)])]),s._v(" "),e("li",[e("p",[s._v("WSL用Ubuntuのインストール"),e("br"),s._v(" "),e("a",{attrs:{href:"https://blog.goo.ne.jp/rezoochi/e/107582cfef94beb971981e413d6ea887",target:"_blank",rel:"noopener noreferrer"}},[s._v("参考ページ2"),e("OutboundLink")],1),e("br"),s._v("\n※ストアを利用しないでインストールする方法が記載されています。"),e("br"),s._v("\n※個人的にストアを自由に利用出来ないため参考にさせてもらいました！")])]),s._v(" "),e("li",[e("p",[s._v("WSL2へのスイッチ"),e("br"),s._v("\nWSL用の仮想OSとしてUbuntuがインストールされているため、"),e("br"),s._v("\n該当のUbuntuに対してWSL2を設定する。"),e("br"),s._v(" "),e("a",{attrs:{href:"https://docs.microsoft.com/ja-jp/windows/wsl/install-win10",target:"_blank",rel:"noopener noreferrer"}},[s._v("参考ページ3"),e("OutboundLink")],1)])])]),s._v(" "),e("p",[e("em",[s._v("サンプルコマンド")])]),s._v(" "),e("p",[s._v("現状のWSLバージョン確認")]),s._v(" "),e("div",{staticClass:"language-PowerShell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-powershell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("PS")]),s._v(" C:\\WINDOWS\\system32> wsl "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("l "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("v\n  NAME            STATE           VERSION\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" Ubuntu"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("18"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("04    Stopped         1\n")])])]),e("p",[s._v("Ubuntuに対するWSL2設定")]),s._v(" "),e("div",{staticClass:"language-PowerShell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-powershell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("PS")]),s._v(" C:\\WINDOWS\\system32> wsl "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("set")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("version Ubuntu"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("18"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("04 2\n変換中です。この処理には数分かかることがあります"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\nWSL 2 との主な違いについては、https:"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("aka"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ms"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("wsl2 を参照してください\n変換が完了しました。\n")])])]),e("p",[s._v("設定後のWSLバージョン確認")]),s._v(" "),e("div",{staticClass:"language-PowerShell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-powershell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("PS")]),s._v(" C:\\WINDOWS\\system32> wsl "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("l "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("v\n  NAME            STATE           VERSION\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" Ubuntu"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("18"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("04    Stopped         2\n")])])]),e("ol",{attrs:{start:"4"}},[e("li",[s._v("Dockerのインストール"),e("br"),s._v("\napt-getでDocker Community Editionをインストールする。"),e("br"),s._v("\nここまで来たら通常のLinuxサーバにDockerをインストールするのと大差ないはずなので、"),e("br"),s._v("\nDockerの公式ページを参考にしてもらうのが分かりやすいと思います。"),e("br"),s._v(" "),e("a",{attrs:{href:"https://docs.docker.com/engine/install/ubuntu/",target:"_blank",rel:"noopener noreferrer"}},[s._v("参考ページ4"),e("OutboundLink")],1)])]),s._v(" "),e("h2",{attrs:{id:"vuepressのセットアップ"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#vuepressのセットアップ"}},[s._v("#")]),s._v(" VuePressのセットアップ")]),s._v(" "),e("p",[s._v("VuePressのセットアップ手順は以下です。")]),s._v(" "),e("ol",[e("li",[s._v("インストール設定用のpackage.jsonをWindowsマシンのローカルに作成する。")]),s._v(" "),e("li",[s._v("上記package.jsonをDockerコンテナにADDする。")]),s._v(" "),e("li",[s._v("Dockerコンテナ内でADDされたpackage.jsonを元にnpm installする。")])]),s._v(" "),e("p",[s._v("※注意点")]),s._v(" "),e("ul",[e("li",[s._v("2、3はDockerfileで定義しておきコンテナをビルドするタイミングで実行されるようにする。"),e("br"),s._v("\nこれでビルドされたコンテナにはVuePress環境がセットアップされ、"),e("br"),s._v("\n後は各種リソースをコンテナに配備してあげれば、"),e("br"),s._v("\n同リソースで動かすことが出来る。")])]),s._v(" "),e("p",[e("em",[s._v("サンプルコマンド")])]),s._v(" "),e("p",[s._v("コンテナビルド")]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" docker build -t loudwalk-frontend "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n")])])]),e("ul",[e("li",[s._v("DockerコンテナとWindowsマシンのローカル（仮想ホストのローカル）では、"),e("br"),s._v("\nVuePress用各種リソース配備ディレクトリをマウントする。"),e("br"),s._v("\n各種リソースとはconfig.js、マークダウンファイル、Vueファイルなど、"),e("br"),s._v("\n作成、編集することでVuePressをカスタマイズしていくためのファイル群を指す。")])]),s._v(" "),e("p",[e("em",[s._v("サンプルコマンド")])]),s._v(" "),e("p",[s._v("ビルドイメージを元にDockerコンテナとWindowsマシンのローカル（仮想ホストのローカル）を"),e("br"),s._v("\nマウントしつつDockerコンテナを起動しDockerコンテナに入る")]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" docker run -p "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v(":8080 -it"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-v /mnt/c/work/apps/loudwalk/frontend/src:/opt/loudwalk-frontend/src"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\nloudwalk-frontend "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sh")]),s._v("\n")])])]),e("ul",[e("li",[s._v("package.jsonのみで初回セットアップする際にVuePressの動作確認をする場合は、"),e("br"),s._v(" "),e("a",{attrs:{href:"https://vuepress.vuejs.org/",target:"_blank",rel:"noopener noreferrer"}},[s._v("VuePress公式ページ"),e("OutboundLink")],1),s._v("を参照する。")])]),s._v(" "),e("h2",{attrs:{id:"github-pagesへのcdのセットアップ"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#github-pagesへのcdのセットアップ"}},[s._v("#")]),s._v(" GitHub PagesへのCDのセットアップ")]),s._v(" "),e("p",[s._v("GitHub PagesへのCDのセットアップ手順は以下となります。"),e("br"),s._v("\n概要レベルですので詳細はGitHub ActionsによるGitHub Pagesへのデプロイに関して、"),e("br"),s._v("\n参考ページも参照してください。"),e("br"),s._v(" "),e("a",{attrs:{href:"https://qiita.com/peaceiris/items/d401f2e5724fdcb0759d",target:"_blank",rel:"noopener noreferrer"}},[s._v("参考ページ"),e("OutboundLink")],1)]),s._v(" "),e("ol",{attrs:{start:"0"}},[e("li",[s._v("前提事項")])]),s._v(" "),e("ul",[e("li",[s._v("公開元はmasterブランチの/docsフォルダとしています。"),e("br"),s._v("\nVuePressはデフォルトでは/docsをルートとして、"),e("br"),s._v("\n/docs/.vuepress/distなどに生成されたファイル群が格納されると思います。"),e("br"),s._v("\n一方、僕はルートを/srcとしたかった（好みの問題です）かつ、"),e("br"),s._v("\n/src/.vuepress配下の管理から生成されたファイル群を外したかったこともあり、"),e("br"),s._v("\n上記の公開元としました。")]),s._v(" "),e("li",[s._v("CDにはGitHub Actionsを使用しています。")])]),s._v(" "),e("ol",[e("li",[s._v("GitHubのリポジトリでGitHub Pagesの有効化")]),s._v(" "),e("li",[s._v("GitHub Actions定義ファイルの作成（/.github/workflow/XXXXX.yml）"),e("br"),s._v("\n僕はGitHub Actionsの実行環境内でリポジトリをチェックアウト、VuePressのビルド、"),e("br"),s._v("\n直接masterブランチの/src/docs配下へコミットとしています。"),e("br"),s._v("\n（諸々あまりよろしくない気もするのですが他に良いやり方が見つけられず。。）")])])])}),[],!1,null,null,null);t.default=a.exports}}]);